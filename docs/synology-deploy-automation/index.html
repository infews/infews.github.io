<!DOCTYPE html> <html lang=en> <head> <meta charset=utf-8> <meta content='width=device-width, initial-scale=1' name=viewport> <title>Synology on Rails Part V: Automate the Rest | DWF’s Journal</title> <link href='/feed.xml' rel=alternate title='Atom Feed' type='application/atom+xml'> <script type='application/ld+json'>
{"@type":"BlogPosting","url":"https://dwf.bigpencil.net/synology-deploy-automation/","datePublished":"2024-09-06","dateCreated":"2024-09-06","dateModified":"2024-09-06","headline":"Synology on Rails Part V: Automate the Rest","abstract":"Thanks to Luke Winikates, the rest of the deploy is now automated.","keywords":["web development","ruby","rails","software engineering","deployment","docker","containers","synology","nas"],"author":{"@type":"Person","name":"Davis W. Frank","email":"dwfrank@gmail.com","url":"https://dwf.bigpencil.net/about_me","alumniOf":"University of Georgia","image":"https://dwf.bigpencil.net/images/dwf@2x-b89bef4d.png","sameAs":["https://www.linkedin.com/in/daviswfrank","https://github.com/infews","https://ruby.social/@dwfrank","https://www.threads.net/@dwfrank"]},"publisher":{"@type":"Person","name":"Davis W. Frank","email":"dwfrank@gmail.com","url":"https://dwf.bigpencil.net/about_me","alumniOf":"University of Georgia","image":"https://dwf.bigpencil.net/images/dwf@2x-b89bef4d.png","sameAs":["https://www.linkedin.com/in/daviswfrank","https://github.com/infews","https://ruby.social/@dwfrank","https://www.threads.net/@dwfrank"]},"articleBody":"\nWhen last we left our intrepid heroes, the final couple of steps of the Rails app deployment to a Synology NAS were still manual. It still took mouse clicks in the Container Manager to pull the image from the registry and rebuild the Project.\n\nGood News, Everyone!\n\nPivot Luke Winikates has put together the SynoCtl project which can drive the Synology DSM via its own API. He snooped the http traffic from the web UI, checked out some other “let’s automate DSM” projects (the project page has some good references), and got to work. The result is a Golang SDK and an executable that I was able to use in my rake tasks to automate the remaining deploy steps.\n\nWhat’s New?\n\nI’ve updated the rake tasks project to use synoctl. There are now rake tasks for pulling the image into the Container Manager Project and rebuilding/restarting the Project.\n\nSynoctl requires more configuration values than I had, which made the tasks more messy. Thanks to some inspiration from Bradley Schaefer, I moved to an RSpec-like configuration in a separate file.\n\nLastly, I added a namespace for the tasks. Which meant a bit more explanation in the README. And,yes, I’ve already moved another app to using this file.\n\nNow with one rake command and a few minutes, we can deploy a new version of a Rails app to the Synology Container Manager and get it restarted. This is a happy place to be.\n\nps: Big thanks to Luke and Bradley!\n","@context":"https://schema.org"}
</script> <link href='https://cdn.jsdelivr.net/npm/holiday.css@0.11.2' rel=stylesheet> <script crossorigin=anonymous src='https://kit.fontawesome.com/e76ee0328c.js'></script> <link href='/stylesheets/v23-fb3ac88f.css' rel=stylesheet> <link href='/stylesheets/prism-laserwave-b0c76a64.css' rel=stylesheet> <script src='/js/prism-7933fd4a.js'></script> </head> <body> <nav class=menu> <ul> <li> <a class='' href='/'>Home</a> </li> <li> <span>Posts</span> <ul> <li> <a href='/series/the-cd-test'>The CD Test</a> </li> <li> <a href='/series/obsidian'>How I Obsidian</a> </li> <li> <a href='/series/interestings'>Interestings for Iterators</a> </li> <li> <a href='/series/rails-docker-nas'>Synology on Rails</a> </li> <li> <a href='/posts'>All Posts</a> </li> <li> <a href='/all_tags'>All Tags</a> </li> </ul> </li> <li> <a href='/about_me'>About Me</a> </li> </ul> </nav> <main class=''> <article> <h1> Synology on Rails Part V: Automate the Rest </h1> <section class='header with_sharing'> <div class=info> <span class=date> 6 September 2024</span> <span class=dash>&#8212;</span> <span class=duration>about a 1 minute read</span> </div> <div class=sharing> <button article='Synology on Rails Part V: Automate the Rest' class=share style='display:none;' type=button> Share <i class='ios fa-solid fa-arrow-up-from-bracket' style='display:none;'></i> <i class='aos fa-solid fa-share-nodes' style='display:none;'></i> </button> </div> </section> <section class=text> <p>When <a href="/synology-using-docker-compose/">last</a> we left our intrepid heroes, the final couple of steps of the Rails app deployment to a Synology NAS were still manual. It still took mouse clicks in the Container Manager to pull the image from the registry and rebuild the Project.</p> <p><a href="https://futurama.fandom.com/wiki/Good_news,_everyone!">Good News, Everyone!</a></p> <p>Pivot <a href="https://github.com/LukeWinikates/">Luke Winikates</a> has put together the <a href="https://github.com/LukeWinikates/synology-go">SynoCtl</a> project which can drive the Synology DSM via its own API. He snooped the http traffic from the web UI, checked out some other “let’s automate DSM” projects (the project page has some good references), and got to work. The result is a Golang SDK and an executable that I was able to use in my rake tasks to automate the remaining deploy steps.</p> <h2>What’s New?</h2> <p>I’ve updated the <a href="https://github.com/infews/synology_rails_deploy_tasks">rake tasks project</a> to use synoctl. There are now rake tasks for pulling the image into the Container Manager Project and rebuilding/restarting the Project.</p> <p>Synoctl requires more configuration values than I had, which made the tasks more messy. Thanks to some inspiration from <a href="https://ruby.social/@soulcutter">Bradley Schaefer</a>, I moved to an RSpec-like configuration in a separate file.</p> <p>Lastly, I added a namespace for the tasks. Which meant a bit more explanation in the README. And,yes, I’ve already moved another app to using this file.</p> <p>Now with <em>one rake command</em> and a few minutes, we can deploy a new version of a Rails app to the Synology Container Manager and get it restarted. This is a happy place to be.</p> <p>ps: Big thanks to Luke and Bradley!</p> </section> <hr> <section class='about with_sharing'> <div class=tags> This article is part of the series <a href="/series/rails-docker-nas">Synology on Rails</a> and is tagged with <a href="/tags/web-development">web development</a>, <a href="/tags/ruby">ruby</a>, <a href="/tags/rails">rails</a>, <a href="/tags/software-engineering">software engineering</a>, and <a href="/tags/deployment">deployment</a>. </div> <div class=sharing> <button article='Synology on Rails Part V: Automate the Rest' class=share style='display:none;' type=button> Share <i class='ios fa-solid fa-arrow-up-from-bracket' style='display:none;'></i> <i class='aos fa-solid fa-share-nodes' style='display:none;'></i> </button> </div> </section> </article> </main> <footer class=site> <p class=small>© 2025 Davis W. Frank</p> </footer> <script async='' src='https://www.googletagmanager.com/gtag/js?id=G-SNXCW3490N'></script> <script>
window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date());
gtag('config', 'G-SNXCW3490N');
</script> </body> <script src='/js/share-c97280fa.js'></script> </html>