<!DOCTYPE html> <html lang=en> <head> <meta charset=utf-8> <meta content='width=device-width, initial-scale=1' name=viewport> <title>A Little More Yak Trimming | DWF’s Journal</title> <link href='/feed.xml' rel=alternate title='Atom Feed' type='application/atom+xml'> <script type='application/ld+json'>
{"@type":"BlogPosting","url":"https://dwf.bigpencil.net/more-blog-yakking/","datePublished":"2023-07-15","dateCreated":"2023-07-15","dateModified":"2023-11-15","headline":"A Little More Yak Trimming","abstract":"I did a couple more small things.","keywords":["ruby","Middleman","HAML","Markdown","blog","CSS","syntax highlighting"],"author":{"@type":"Person","name":"Davis W. Frank","email":"dwfrank@gmail.com","url":"https://dwf.bigpencil.net/about_me","alumniOf":"University of Georgia","image":"https://dwf.bigpencil.net/images/dwf@2x-b89bef4d.png","sameAs":["https://www.linkedin.com/in/daviswfrank","https://github.com/infews","https://ruby.social/@dwfrank","https://www.threads.net/@dwfrank"]},"publisher":{"@type":"Person","name":"Davis W. Frank","email":"dwfrank@gmail.com","url":"https://dwf.bigpencil.net/about_me","alumniOf":"University of Georgia","image":"https://dwf.bigpencil.net/images/dwf@2x-b89bef4d.png","sameAs":["https://www.linkedin.com/in/daviswfrank","https://github.com/infews","https://ruby.social/@dwfrank","https://www.threads.net/@dwfrank"]},"articleBody":"\nI continued to trim around the ears of this blog since last week. And a few things stood out that I felt worth sharing.\n\nCSS Factoring\n\nCSS, in this case SCSS, is source code worth factoring just like any other code. Now that I’d trimmed the stylesheets significantly, I felt it worth organizing them better for later maintenance. Maybe I won’t feel the need to throw out and start over in another year!\n\nI’m using Google Fonts here. While I was pretty happy with the indirection of SASS variables for font family, I did go a little further and have variables for color and weight. Then I pulled out a fonts-only file. While I stopped short of writing a function that generated the Google Fonts URL, I still can change all font attributes in one place if I choose. That’s a fine win.\n\nI also made sure all my font units were in rem, making it easier to scale things for mobile as I tweak sizes over time when fonts change.\n\nI pulled out other sections, roughly mapped to the different types of pages, each into their own files. And I put special media queries at the bottom of each file. But I do have 1 key complex media query for portrait phones in its own file. The longest file is 85 lines. My final css file is only imports.\n\nBetter Syntax Highlighting\n\nLastly, due to my Obsidian series, there are a lot of code blocks that are just Markdown. I wasn’t happy with how simply Rouge (and thus Pygments) supported Markdown - the tagging is simpler than I’d like. Kramdown supports Rouge and [Coderay][c]. But I wanted a converter that had more granularity for MD.\n\nI converted to using Prism, which highlights \u0026lt;code\u0026gt; blocks with JavaScript. This required:\n\n\n  Downloading a Prism bundle that included the language support I expect\n  Finding and tweaking a Prism theme\n  Adding these to the repo\n  Adding these to the layout files\n  Turning off syntax highlighting for Kramdown with a well-placed nil in Middleman’s config.rb like so:\n\n\nset :markdown_engine, :kramdown\nset :markdown,\n    auto_ids: false,\n    input: \"GFM\",            # GH emoji + ``` code blocks\n    layout_engine: :haml,\n    tables: true,\n    autolink: true,\n    smartypants: true,\n    fenced_code_blocks: true,\n    syntax_highlighter: nil  # turns off Rouge so we can use PrismJS\n\nWhile Kramdown won’t parse the contents of the \u0026lt;code\u0026gt; block, it does set a CSS class on it (and the parent \u0026lt;pre\u0026gt; tag) based on the language. Prism uses that class when converting to HTML for coloring.\n\nThat’s enough blog yak shaving for a while. Back to writing…\n","@context":"https://schema.org"}
</script> <link href='https://cdn.jsdelivr.net/npm/holiday.css@0.11.2' rel=stylesheet> <script crossorigin=anonymous src='https://kit.fontawesome.com/e76ee0328c.js'></script> <link href='/stylesheets/v23-fb3ac88f.css' rel=stylesheet> <link href='/stylesheets/prism-laserwave-b0c76a64.css' rel=stylesheet> <script src='/js/prism-7933fd4a.js'></script> </head> <body> <nav class=menu> <ul> <li> <a class='' href='/'>Home</a> </li> <li> <span>Posts</span> <ul> <li> <a href='/series/the-cd-test'>The CD Test</a> </li> <li> <a href='/series/obsidian'>How I Obsidian</a> </li> <li> <a href='/series/interestings'>Interestings for Iterators</a> </li> <li> <a href='/series/rails-docker-nas'>Synology on Rails</a> </li> <li> <a href='/posts'>All Posts</a> </li> <li> <a href='/all_tags'>All Tags</a> </li> </ul> </li> <li> <a href='/about_me'>About Me</a> </li> </ul> </nav> <main class=''> <article> <h1> A Little More Yak Trimming </h1> <section class='header with_sharing'> <div class=info> <span class=date>15 July 2023</span> <span class=dash>&#8212;</span> <span class=duration>about a 2 minute read</span> </div> <div class=sharing> <button article='A Little More Yak Trimming' class=share style='display:none;' type=button> Share <i class='ios fa-solid fa-arrow-up-from-bracket' style='display:none;'></i> <i class='aos fa-solid fa-share-nodes' style='display:none;'></i> </button> </div> </section> <section class=text> <p>I continued to trim around the ears of this blog since last week. And a few things stood out that I felt worth sharing.</p> <h2>CSS Factoring</h2> <p>CSS, in this case SCSS, is source code worth factoring just like any other code. Now that I’d trimmed the stylesheets significantly, I felt it worth organizing them better for later maintenance. Maybe I won’t feel the need to throw out and start over in another year!</p> <p>I’m using Google Fonts here. While I was pretty happy with the indirection of SASS variables for font family, I did go a little further and have variables for color and weight. Then I pulled out a fonts-only file. While I stopped short of writing a function that generated the Google Fonts URL, I still can change all font attributes in one place if I choose. That’s a fine win.</p> <p>I also made sure all my font units were in <code>rem</code>, making it easier to scale things for mobile as I tweak sizes over time when fonts change.</p> <p>I pulled out other sections, roughly mapped to the different types of pages, each into their own files. And I put special media queries at the bottom of each file. But I do have 1 key complex media query for portrait phones in its own file. The longest file is 85 lines. My final css file is only imports.</p> <h2>Better Syntax Highlighting</h2> <p>Lastly, due to my <a href="/series/obsidian">Obsidian</a> series, there are a lot of code blocks that are just Markdown. I wasn’t happy with how simply <a href="https://github.com/rouge-ruby/rouge">Rouge</a> (and thus <a href="https://pygments.org/">Pygments</a>) supported Markdown - the tagging is simpler than I’d like. <a href="https://kramdown.gettalong.org/">Kramdown</a> supports Rouge and [Coderay][c]. But I wanted a converter that had more granularity for MD.</p> <p>I converted to using <a href="https://prismjs.com/">Prism</a>, which highlights <code>&lt;code&gt;</code> blocks with JavaScript. This required:</p> <ul> <li>Downloading a Prism bundle that included the language support I expect</li> <li>Finding and tweaking a Prism theme</li> <li>Adding these to the repo</li> <li>Adding these to the layout files</li> <li>Turning off syntax highlighting for <a href="https://kramdown.gettalong.org/">Kramdown</a> with a well-placed <code>nil</code> in Middleman’s <code>config.rb</code> like so:</li> </ul> <pre><code class="language-ruby">set :markdown_engine, :kramdown
set :markdown,
    auto_ids: false,
    input: "GFM",            # GH emoji + ``` code blocks
    layout_engine: :haml,
    tables: true,
    autolink: true,
    smartypants: true,
    fenced_code_blocks: true,
    syntax_highlighter: nil  # turns off Rouge so we can use PrismJS
</code></pre> <p>While Kramdown won’t parse the contents of the <code>&lt;code&gt;</code> block, it does set a CSS class on it (and the parent <code>&lt;pre&gt;</code> tag) based on the language. Prism uses that class when converting to HTML for coloring.</p> <p>That’s enough blog yak shaving for a while. Back to writing…</p> </section> <hr> <section class='about with_sharing'> <div class=tags> This article is tagged with <a href="/tags/ruby">ruby</a>, <a href="/tags/web-development">web development</a>, <a href="/tags/blog">blog</a>, and <a href="/tags/software">software</a>. </div> <div class=sharing> <button article='A Little More Yak Trimming' class=share style='display:none;' type=button> Share <i class='ios fa-solid fa-arrow-up-from-bracket' style='display:none;'></i> <i class='aos fa-solid fa-share-nodes' style='display:none;'></i> </button> </div> </section> </article> </main> <footer class=site> <p class=small>© 2025 Davis W. Frank</p> </footer> <script async='' src='https://www.googletagmanager.com/gtag/js?id=G-SNXCW3490N'></script> <script>
window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date());
gtag('config', 'G-SNXCW3490N');
</script> </body> <script src='/js/share-c97280fa.js'></script> </html>